<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📖 Book of Mormon - Top 10</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1 {
            font-size: 24px;
        }
        input[type="text"] {
            padding: 5px;
            margin-right: 10px;
        }
        button {
            padding: 5px 10px;
        }
        ul {
            margin-top: 20px;
            list-style-type: none;
            padding: 0;
        }
        li {
            background-color: #f9f9f9;
            padding: 10px;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .delete {
            background-color: red;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            width: fit-content;
        }
    </style>
</head>
<body>

<h1>📖 Book of Mormon - Top 10</h1>
<main>
    <label for="favchap">Enter Book and Chapter: </label>
    <input type="text" id="favchap" placeholder="Alma 5">
    <button id="addChapter">Add Chapter</button>
    <ul id="list"></ul>
</main>

<script>
    const input = document.querySelector('#favchap');
    const button = document.querySelector('button');
    const list = document.querySelector('#list');

    // Declare the array with a fallback to an empty array if there's no data in localStorage
    let chaptersArray = getChapterList() || [];

    // Function to get chapter list from localStorage
    function getChapterList() {
        return JSON.parse(localStorage.getItem('myFavBOMList'));
    }

    // Function to save the chapter list back to localStorage
    function setChapterList() {
        localStorage.setItem('myFavBOMList', JSON.stringify(chaptersArray));
    }

    // Function to display a single chapter in the list
    function displayList(item) {
        let li = document.createElement('li');
        let deletebutton = document.createElement('button');
        
        li.textContent = item;  // Set the text of the list item
        deletebutton.textContent = '❌';  // Set the delete button text
        deletebutton.classList.add('delete');  // Add class to the delete button
        
        li.append(deletebutton);  // Append the delete button to the list item
        list.append(li);  // Append the list item to the UL element

        // Add event listener for the delete button
        deletebutton.addEventListener('click', function () {
            list.removeChild(li);  // Remove the list item from the display
            deleteChapter(li.textContent);  // Call the deleteChapter function to remove the item from array and localStorage
            input.focus();  // Set focus back to the input
        });
    }

    // Function to delete a chapter from chaptersArray and update localStorage
    function deleteChapter(chapter) {
        // Remove the ❌ from the chapter string
        chapter = chapter.slice(0, chapter.length - 1);
        
        // Filter the chaptersArray to remove the chapter
        chaptersArray = chaptersArray.filter(item => item !== chapter);
        
        // Update the localStorage with the new array
        setChapterList();
    }

    // Function to display all chapters in the array
    function displayChapters() {
        list.innerHTML = '';  // Clear the list first
        chaptersArray.forEach(item => {
            displayList(item);  // Display each chapter in the array
        });
    }

    // Event listener to add a new chapter
    button.addEventListener('click', () => {
        if (input.value != '') {  // Make sure the input is not empty
            displayList(input.value);  // Call the function that outputs the submitted chapter
            chaptersArray.push(input.value);  // Add the chapter to the array
            setChapterList();  // Update the localStorage with the new array
            input.value = '';  // Clear the input
            input.focus();  // Set the focus back to the input
        }
    });

    // Initial display of chapters (if any)
    displayChapters();
</script>

</body>
</html>

